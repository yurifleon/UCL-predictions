{% extends "base.html" %}
{% block title %}{{ _('Leaderboard - UCL Forecast') }}{% endblock %}
{% block content %}
<h2 class="mb-4">{{ _('Leaderboard') }}</h2>

<div class="card">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>{{ _('Rank') }}</th>
                        <th>{{ _('User') }}</th>
                        {% for m in matches %}
                        <th class="text-center" title="{{ m.home_team }} vs {{ m.away_team }}">
                            {{ m.home_team[:3] }}-{{ m.away_team[:3] }}
                        </th>
                        {% endfor %}
                        <th class="text-center">{{ _('Total') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in rows %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td><strong>{{ row.user }}</strong></td>
                        {% for b in row.breakdown %}
                        <td class="text-center">
                            {% if b.points.total > 0 %}
                            <span class="badge bg-success">{{ b.points.total }}</span>
                            {% else %}
                            <span class="text-muted">0</span>
                            {% endif %}
                        </td>
                        {% endfor %}
                        <td class="text-center"><strong class="text-info">{{ row.total }}</strong></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<h5 class="mt-4">{{ _('Scoring System') }}</h5>
<div class="card">
    <div class="card-body">
        <table class="table table-sm mb-0">
            <thead><tr><th></th><th>{{ _('Round of 16') }}</th><th>{{ _('Quarter-finals') }} +</th></tr></thead>
            <tbody>
                <tr><td><strong>{{ _('Exact score:') }}</strong></td><td>6 pts</td><td>10 pts</td></tr>
                <tr><td><strong>{{ _('Correct result + goal difference:') }}</strong></td><td>4 pts</td><td>7 pts</td></tr>
                <tr><td><strong>{{ _('Correct result only:') }}</strong></td><td>2 pts</td><td>5 pts</td></tr>
                <tr><td><strong>{{ _('Max per tie:') }}</strong></td><td>12 pts</td><td>20 pts</td></tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
